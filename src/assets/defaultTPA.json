{
  "_id": "65369c86ecf7ed5c655be523",
  "id": "tpa-project01",
  "version": "1.0.0",
  "type": "agreement",
  "context": {
    "infrastructure": {

    },
    "validity": {
      "initial": "2019-01-01",
      "timeZone": "America/Los_Angeles"
    },
    "definitions": {
      "schemas": {

      },
      "dashboards": {
        "main": {
          "base": "http://host.docker.internal:5200/api/v1/public/grafana-dashboards/tpa/base.json",
          "modifier": "http://host.docker.internal:5200/api/v1/public/grafana-dashboards/tpa/modifier.js",
          "overlay": "http://host.docker.internal:5200/api/v1/public/grafana-dashboards/tpa/overlay.js",
          "config": {}
        }
      },
      "scopes": {
        "development": {
          "project": {
            "name": "Project",
            "description": "Project",
            "type": "string",
            "default": "project01"
          },
          "class": {
            "name": "Class",
            "description": "Group some projects",
            "type": "string",
            "default": "class01"
          }
        }
      },
      "collectors": {
        "eventcollector": {
          "infrastructurePath": "internal.collector.events",
          "endpoint": "/api/v2/computations",
          "type": "POST-GET-V1",
          "config": {
            "scopeManager": "http://host.docker.internal:5700/api/v1/scopes/development"
          }
        }
      }
    }
  },
  "terms": {
    "metrics": {
      "PERCENTAGE_NEWBRANCHWR_STARTEDSTORIES": {
        "collector": {
          "infrastructurePath": "internal.collector.events",
          "endpoint": "/api/v2/computations",
          "type": "POST-GET-V1",
          "config": {
            "scopeManager": "http://host.docker.internal:5700/api/v1/scopes/development"
          }
        },
        "measure": {
          "computing": "actual",
          "element": {
            "percentage": {
              "related": {
                "ghwrapper": {
                  "events": {
                    "type": "CreateEvent",
                    "payload": {
                      "ref_type": "branch"
                    }
                  }
                },
                "window": 86400
              }
            }
          },
          "event": {
            "pivotal": {
              "activity": {
                "highlight": "started"
              }
            }
          },
          "scope": {
            "project": {
              "name": "Project",
              "description": "Project",
              "type": "string",
              "default": "project01"
            },
            "class": {
              "name": "Class",
              "description": "Group some projects",
              "type": "string",
              "default": "class01"
            }
          }
        }
      },
      "PERCENTAGE_OPENPR_FINISHEDSTORIES": {
        "collector": {
          "infrastructurePath": "internal.collector.events",
          "endpoint": "/api/v2/computations",
          "type": "POST-GET-V1",
          "config": {
            "scopeManager": "http://host.docker.internal:5700/api/v1/scopes/development"
          }
        },
        "measure": {
          "computing": "actual",
          "element": {
            "percentage": {
              "related": {
                "github": {
                  "allPR": {

                  }
                },
                "window": 86400
              }
            }
          },
          "event": {
            "pivotal": {
              "activity": {
                "highlight": "finished"
              }
            }
          },
          "scope": {
            "project": {
              "name": "Project",
              "description": "Project",
              "type": "string",
              "default": "project01"
            },
            "class": {
              "name": "Class",
              "description": "Group some projects",
              "type": "string",
              "default": "class01"
            }
          }
        }
      },
      "PERCENTAGE_MERGEPR_DELIVEREDSTORIES": {
        "collector": {
          "infrastructurePath": "internal.collector.events",
          "endpoint": "/api/v2/computations",
          "type": "POST-GET-V1",
          "config": {
            "scopeManager": "http://host.docker.internal:5700/api/v1/scopes/development"
          }
        },
        "measure": {
          "computing": "actual",
          "element": {
            "percentage": {
              "related": {
                "github": {
                  "mergedPR": {

                  }
                },
                "window": 86400
              }
            }
          },
          "event": {
            "pivotal": {
              "activity": {
                "highlight": "delivered"
              }
            }
          },
          "scope": {
            "project": {
              "name": "Project",
              "description": "Project",
              "type": "string",
              "default": "project01"
            },
            "class": {
              "name": "Class",
              "description": "Group some projects",
              "type": "string",
              "default": "class01"
            }
          }
        }
      },
      "PERCENTAGE_RELEASES_DELIVEREDSTORIES": {
        "collector": {
          "infrastructurePath": "internal.collector.events",
          "endpoint": "/api/v2/computations",
          "type": "POST-GET-V1",
          "config": {
            "scopeManager": "http://host.docker.internal:5700/api/v1/scopes/development"
          }
        },
        "measure": {
          "computing": "actual",
          "element": {
            "percentage": {
              "related": {
                "heroku": {
                  "releases": {
                    "status": "succeeded",
                    "description": "%CONTAINS%Deploy"
                  }
                },
                "window": 86400000
              }
            }
          },
          "event": {
            "pivotal": {
              "activity": {
                "highlight": "delivered"
              }
            }
          },
          "scope": {
            "project": {
              "name": "Project",
              "description": "Project",
              "type": "string",
              "default": "project01"
            },
            "class": {
              "name": "Class",
              "description": "Group some projects",
              "type": "string",
              "default": "class01"
            }
          }
        }
      },
      "PERCENTAGE_MASTER_PR_MERGE_CHANGES_UNDER_300": {
        "collector": {
          "infrastructurePath": "internal.collector.events",
          "endpoint": "/api/v2/computations",
          "type": "POST-GET-V1",
          "config": {
            "scopeManager": "http://host.docker.internal:5700/api/v1/scopes/development"
          }
        },
        "measure": {
          "computing": "actual",
          "element": {
            "percentage": {
              "related": {
                "github": {
                  "closedPRFiles": {
                    "changes": "%SECOND%%LOWER_OR_EQUAL%300"
                  }
                }
              }
            }
          },
          "event": {
            "github": {
              "closedPRFiles": {

              }
            }
          },
          "scope": {
            "project": {
              "name": "Project",
              "description": "Project",
              "type": "string",
              "default": "project01"
            },
            "class": {
              "name": "Class",
              "description": "Group some projects",
              "type": "string",
              "default": "class01"
            }
          }
        }
      },
      "NUMBER_GITHUB_MERGE_PR": {
        "collector": {
          "infrastructurePath": "internal.collector.events",
          "endpoint": "/api/v2/computations",
          "type": "POST-GET-V1",
          "config": {
            "scopeManager": "http://host.docker.internal:5700/api/v1/scopes/development"
          }
        },
        "measure": {
          "computing": "actual",
          "element": "number",
          "event": {
            "github": {
              "mergedPR": {

              }
            }
          },
          "scope": {
            "project": {
              "name": "Project",
              "description": "Project",
              "type": "string",
              "default": "project01"
            },
            "class": {
              "name": "Class",
              "description": "Group some projects",
              "type": "string",
              "default": "class01"
            }
          }
        }
      },
      "STDEV_GITHUB_MERGE_PR": {
        "collector": {
          "infrastructurePath": "internal.collector.events",
          "endpoint": "/api/v2/computations",
          "type": "POST-GET-V1",
          "config": {
            "scopeManager": "http://host.docker.internal:5700/api/v1/scopes/development"
          }
        },
        "measure": {
          "computing": "string",
          "element": {
            "stdev": {
              "period": "daily"
            }
          },
          "event": {
            "github": {
              "mergedPR": {

              }
            }
          },
          "scope": {
            "project": {
              "name": "Project",
              "description": "Project",
              "type": "string",
              "default": "project01"
            },
            "class": {
              "name": "Class",
              "description": "Group some projects",
              "type": "string",
              "default": "class01"
            }
          }
        }
      }
    },
    "guarantees": [
      {
        "id": "75_PERCENT_MASTER_PR_OPEN_FINSH_STORIES_WITHIN_A_DAY",
        "notes": "#### Description\r\n```\r\nTP-1: At least 75% of finished stories(PT) must match creation of a PR within a day.",
        "description": "At least 75% of finished stories must match the creation of a PR within a day.",
        "scope": {
          "project": {
            "name": "Project",
            "description": "Project",
            "type": "string",
            "default": "project01"
          },
          "class": {
            "name": "Class",
            "description": "Group some projects",
            "type": "string",
            "default": "class01"
          }
        },
        "of": [
          {
            "scope": {
              "project": "project01"
            },
            "objective": "PERCENTAGE_OPENPR_FINISHEDSTORIES >= 75",
            "with": {
              "PERCENTAGE_OPENPR_FINISHEDSTORIES": {

              }
            },
            "window": {
              "type": "static",
              "period": "daily",
              "initial": "2018-01-01"
            }
          }
        ]
      },
      {
        "id": "75_PERCENT_MASTER_PR_MERGE_DELVR_STORIES_WITHIN_A_DAY",
        "notes": "#### Description\r\n```\r\nTP-1: At least 75% of delivered stories(PT) must match a the merge of a PR into master within a day.",
        "description": "At least 75% of delivered stories must match the merge of a PR into master within a day.",
        "scope": {
          "project": {
            "name": "Project",
            "description": "Project",
            "type": "string",
            "default": "project01"
          },
          "class": {
            "name": "Class",
            "description": "Group some projects",
            "type": "string",
            "default": "class01"
          }
        },
        "of": [
          {
            "scope": {
              "project": "project01"
            },
            "objective": "PERCENTAGE_MERGEPR_DELIVEREDSTORIES >= 75",
            "with": {
              "PERCENTAGE_MERGEPR_DELIVEREDSTORIES": {

              }
            },
            "window": {
              "type": "static",
              "period": "daily",
              "initial": "2018-01-01"
            }
          }
        ]
      },
      {
        "id": "75_PERCENT_MASTER_PR_MERGE_LESS_THAN_300_CHANGES_WITHIN_A_DAY",
        "notes": "#### Description\r\n```\r\nTP-1: At least 75% of delivered stories(PT) must match a the merge of a PR into master within a day.",
        "description": "At least 75% of delivered stories must match the merge of a PR into master within a day.",
        "scope": {
          "project": {
            "name": "Project",
            "description": "Project",
            "type": "string",
            "default": "project01"
          },
          "class": {
            "name": "Class",
            "description": "Group some projects",
            "type": "string",
            "default": "class01"
          }
        },
        "of": [
          {
            "scope": {
              "project": "project01"
            },
            "objective": "PERCENTAGE_MASTER_PR_MERGE_CHANGES_UNDER_300 >= 75",
            "with": {
              "PERCENTAGE_MASTER_PR_MERGE_CHANGES_UNDER_300": {

              }
            },
            "window": {
              "type": "static",
              "period": "daily",
              "initial": "2018-01-01"
            }
          }
        ]
      },
      {
        "id": "NUMBER_MASTER_PR_MERGE_WEEKLY_OVER_1_OR_EQUAL",
        "notes": "#### Description\r\n```\r\nTP-1: At least 75% of delivered stories(PT) must match a the merge of a PR into master within a day.",
        "description": "At least 75% of delivered stories must match the merge of a PR into master within a day.",
        "scope": {
          "project": {
            "name": "Project",
            "description": "Project",
            "type": "string",
            "default": "project01"
          },
          "class": {
            "name": "Class",
            "description": "Group some projects",
            "type": "string",
            "default": "class01"
          }
        },
        "of": [
          {
            "scope": {
              "project": "project01"
            },
            "objective": "NUMBER_GITHUB_MERGE_PR >= 1",
            "with": {
              "NUMBER_GITHUB_MERGE_PR": {

              }
            },
            "window": {
              "type": "static",
              "period": "weekly",
              "initial": "2018-01-01"
            }
          }
        ]
      },
      {
        "id": "STDEV_GITHUB_MERGE_PR_WEEKLY_UNDER_1",
        "notes": "#### Description\r\n```\r\nTP-1: At least 75% of delivered stories(PT) must match a the merge of a PR into master within a day.",
        "description": "At least 75% of delivered stories must match the merge of a PR into master within a day.",
        "scope": {
          "project": {
            "name": "Project",
            "description": "Project",
            "type": "string",
            "default": "project01"
          },
          "class": {
            "name": "Class",
            "description": "Group some projects",
            "type": "string",
            "default": "class01"
          }
        },
        "of": [
          {
            "scope": {
              "project": "project01"
            },
            "objective": "STDEV_GITHUB_MERGE_PR < 1",
            "with": {
              "STDEV_GITHUB_MERGE_PR": {

              }
            },
            "window": {
              "type": "static",
              "period": "weekly",
              "initial": "2018-01-01"
            }
          }
        ]
      }
    ]
  },
  "__v": 0
}
